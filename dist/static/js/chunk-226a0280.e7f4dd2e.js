(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-226a0280"],{"333d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},a=[];i("a9e3");Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,i){var n=r(),a=t-n,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var r=Math.easeInOutQuad(c,n,a,e);s(r),c<e?o(t):i&&"function"===typeof i&&i()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&l(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(i("58ad"),i("2877")),p=Object(d["a"])(u,n,a,!1,null,"38b4dca8",null);e["a"]=p.exports},"4e82":function(t,e,i){"use strict";var n=i("23e7"),a=i("1c0b"),o=i("7b0b"),s=i("d039"),r=i("a640"),l=[],c=l.sort,u=s((function(){l.sort(void 0)})),d=s((function(){l.sort(null)})),p=r("sort"),m=u||!d||!p;n({target:"Array",proto:!0,forced:m},{sort:function(t){return void 0===t?c.call(o(this)):c.call(o(this),a(t))}})},"58ad":function(t,e,i){"use strict";i("b19e")},"92ca":function(t,e,i){"use strict";i("cc6f")},a1c3:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("label",{staticStyle:{"font-size":"x-large"}},[t._v("文件上传")])]),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{model:t.form}},[i("el-form-item",[i("el-steps",{attrs:{active:t.active,"align-center":!0}},[i("el-step",{attrs:{title:"步骤 1",icon:"el-icon-upload2"}}),i("el-step",{attrs:{title:"步骤 2",icon:"el-icon-upload"}}),i("el-step",{attrs:{title:"步骤 3",icon:"el-icon-notebook-2"}})],1)],1),i("el-form-item",[i("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"margin-top":"20px"},attrs:{"show-file-list":!0,"http-request":t.uploadFileToServer,action:"",limit:t.limitNum,accept:".ppt, .pptx, .pdf, jpg, .jpeg, .png, .gif, .bmp, .PPT, .PPTX, .PDF, .JPG, .JPEG, .PNG, .GIF, .BMP,","list-type":"text","file-list":t.fileList,"auto-upload":!1,"on-remove":t.handleRemove,"on-exceed":t.exceedFile,"on-change":t.handleChange,"before-upload":t.beforeUploadFile}},[i("div",{staticClass:"el-upload__tip",staticStyle:{"margin-left":"100px"},attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传ppt/pptx文件，且不超过10MB")]),i("div",{staticStyle:{width:"calc(0.83 * 100vw)",display:"flex","justify-content":"space-around"}},[i("el-button",{attrs:{slot:"trigger",size:"medium",type:"info",icon:"el-icon-upload2"},on:{click:t.chooseFile},slot:"trigger"},[i("em",{staticStyle:{"font-style":"normal"}},[t._v(" | ")]),t._v("选取文件")]),i("el-button",{attrs:{size:"medium",type:"success",icon:"el-icon-upload"},on:{click:t.submitUpload}},[i("em",{staticStyle:{"font-style":"normal"}},[t._v(" | ")]),t._v("上传到服务器")]),i("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-notebook-2"},on:{click:t.showContext}},[i("em",{staticStyle:{"font-style":"normal"}},[t._v(" | ")]),t._v("获取上下文")])],1)])],1)],1)],1),i("el-card",[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("label",{staticStyle:{"font-size":"x-large"}},[t._v("上下文展示")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowTable,expression:"isShowTable"}]},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":"","row-key":"cId"},on:{"sort-change":t.sortChange}},[i("el-table-column",{attrs:{label:"ID",prop:"cId",sortable:"custom",align:"center",width:"80","class-name":t.getSortClass("id")},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("span",[t._v(t._s(n.cId))])]}}])}),i("el-table-column",{attrs:{label:"上下文",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("span",{staticStyle:{"margin-left":"10px",display:"block"}},[t._v(" "+t._s(n.cText)+" ")])]}}])}),i("el-table-column",{attrs:{label:"状态","class-name":"status-col",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[i("div",{staticStyle:{margin:"0 auto","text-align":"center"}},[i("el-tag",{attrs:{type:t._f("statusFilter")(n.cIsChecked)}},[t._v(" "+t._s(n.cIsChecked?"已标注":"未标注")+" ")])],1)]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row,a=e.$index;return[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit(n,a)}}},[t._v(" 编辑 ")]),i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(n,a)}}},[t._v(" 删除 ")])]}}])})],1),i("Pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],staticStyle:{"text-align":"center"},attrs:{total:t.total,page:t.listQuery.pageNum,limit:t.listQuery.pageLimit},on:{"update:page":function(e){return t.$set(t.listQuery,"pageNum",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageLimit",e)},pagination:t.getList}})],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button-group",{staticStyle:{margin:"0 auto"}},[i("el-button",{attrs:{type:"info",icon:"el-icon-arrow-left"},on:{click:t.reloadFile}},[t._v("上一步")]),i("el-button",{attrs:{type:"primary"},on:{click:t.toContent}},[t._v("下一步"),i("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1),i("el-dialog",{attrs:{title:"上下文修改",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.temp}},[i("el-form-item",{attrs:{label:"ID: "+t.temp.cId,"label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",type:"textarea",autosize:!0},model:{value:t.temp.cText,callback:function(e){t.$set(t.temp,"cText",e)},expression:"temp.cText"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.handleNo}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleYes}},[t._v("确 定")])],1)],1)],1)],1)},a=[],o=i("1da1"),s=(i("d3b7"),i("159b"),i("4e82"),i("99af"),i("b0c0"),i("c740"),i("a434"),i("96cf"),i("333d")),r=i("6724"),l=i("b775");function c(t){return Object(l["a"])({url:"/multistep/uploadFile",method:"post",data:t})}function u(t){return Object(l["a"])({url:"/multistep/getContext",method:"get",params:t})}function d(t){return Object(l["a"])({url:"/multistep/updateContext",method:"post",data:t})}function p(t){return Object(l["a"])({url:"/multistep/deleteContext",method:"delete",params:t})}var m=i("0644"),f=i.n(m),g={name:"DataInput",components:{Pagination:s["a"]},directives:{waves:r["a"]},filters:{statusFilter:function(t){return t?"success":"danger"}},data:function(){return{isShowTable:!1,active:0,formLabelWidth:"80px",form:{file:""},limitNum:1,fileList:[],total:120,tableKey:0,listLoading:!1,list:[{cId:"95",cText:"culpa esse mollit ad ut",cIsChecked:!0,isEdit:!1},{cId:"14",cText:"nisi enim in",cIsChecked:!1,isEdit:!1},{cId:"88",cText:"ut velit voluptate",cIsChecked:!0,isEdit:!1},{cId:"24",cText:"fugiat do",cIsChecked:!0,isEdit:!1}],listQuery:{pageNum:1,pageLimit:20},dialogFormVisible:!1,temp:{}}},methods:{uploadFileToServer:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=new FormData,i.append("multipartFile",t.form.file),e.prev=2,t.listLoading=!0,e.next=6,c(i);case 6:n=e.sent,200===n.code?setTimeout((function(){t.listLoading=!1,t.active=2,t.$message.success("上传到服务器成功")}),300):t.listLoading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](2),t.listLoading=!1,t.$message.error("上传到服务器失败");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))()},getList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.listLoading=!0,e.next=4,u(t.listQuery);case 4:i=e.sent,200===i.code?(t.list=i.data.contextList,t.list.forEach((function(t){t.isEdit=!1,t.sort="+id"})),t.total=i.data.total,setTimeout((function(){t.listLoading=!1,t.$message.success("获取上下文成功")}),300)):t.listLoading=!1,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),t.listLoading=!1,t.$message.error("获取上下文失败");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},handleRemove:function(t,e){this.fileList=e,this.form.file="",this.active=0},exceedFile:function(t,e){this.$notify.warning({title:"警告",message:"只能选择 ".concat(this.limitNum," 个文件，当前共选择了 ").concat(t.length+e.length," 个，请删除当前文件后再重新选取文件")})},handleChange:function(t,e){this.fileList=e,this.form.file=t.raw,this.fileList.length||(this.active=0)},beforeUploadFile:function(t){var e=t.name.substring(t.name.lastIndexOf(".")+1),i=t.size/1024/1024;return"ppt"!==e&&"pptx"!==e?(this.$notify.warning({title:"警告",message:"只能上传ppt/pptx（即后缀是.ppt/.pptx）文件"}),!1):i>10?(this.$notify.warning({title:"警告",message:"文件大小不得超过10M"}),!1):void 0},chooseFile:function(t){this.isShowTable=!1,this.active=1},submitUpload:function(t){if(t.stopPropagation(),!this.fileList.length)return this.$message.warning("请先选择文件 ！"),void(this.active=0);this.uploadFileToServer()},showContext:function(t){var e=this;t.stopPropagation(),this.getList(),setTimeout((function(){e.isShowTable=!0,e.active=3}),300)},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":"descending"},sortChange:function(t){t.column;var e=t.prop,i=t.order;"cId"===e&&this.sortByID(i)},sortByID:function(t){this.listQuery.sort="ascending"===t?"+id":"-id",this.handleFilter()},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},handleEdit:function(t,e){this.temp=f()(this.list[e]),this.dialogFormVisible=!0},handleYes:function(){var t=this;this.dialogFormVisible=!1;var e=this.list.findIndex((function(e){return e.cId===t.temp.cId}));this.list.splice(e,1,this.temp),this.handleModifyStatus(this.list[e],!0)},handleNo:function(){this.dialogFormVisible=!1},handleModifyStatus:function(t,e){var i=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return delete t.isEdit,delete t.sort,t.cIsChecked=e,n.prev=3,i.listLoading=!0,n.next=7,d(t);case 7:a=n.sent,200===a.code?setTimeout((function(){i.listLoading=!1,i.$message({message:"成功更新ID为".concat(t.cId,"的上下文"),type:"success"})}),300):i.listLoading=!1,n.next=15;break;case 11:n.prev=11,n.t0=n["catch"](3),i.listLoading=!1,i.$message({message:"更新ID为".concat(t.cId,"的上下文失败"),type:"error"});case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))()},handleDelete:function(t,e){var i=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.listLoading=!0,e.next=3,p({cId:t.cId});case 3:n=e.sent,200===n.code&&setTimeout((function(){i.$message({type:"success",message:"删除成功!"}),i.getList(),i.listLoading=!1}),300);case 5:case"end":return e.stop()}}),e)})))).catch((function(){i.$message({type:"info",message:"已取消删除"}),i.listLoading=!1}))},reloadFile:function(){this.isShowTable=!1,this.active=0,this.fileList=[],this.form.file=""},toContent:function(){this.$router.push({name:"QGEvaluation"})}}},h=g,v=(i("92ca"),i("2877")),b=Object(v["a"])(h,n,a,!1,null,"3131aa60",null);e["default"]=b.exports},b19e:function(t,e,i){},cc6f:function(t,e,i){}}]);